default: &default
  adapter: postgresql
  encoding: unicode
  pool: <%= ENV.fetch("RAILS_MAX_THREADS", 5) %>
  username: <%= ENV["PG_USERNAME"] || "postgres" %>
  password: <%= ENV["PG_PASSWORD"] || "" %>
  host: <%= ENV["PG_HOST"] || "localhost" %>

development:
  <<: *default
  database: app_development

test:
  <<: *default
  database: app_test

production:
  <<: *default
  # Heroku 本番では DATABASE_URL を使う
  url: <%= ENV.fetch("DATABASE_URL") %>
  # プールサイズだけ指定しておくとレスポンス性能が安定します
  pool: <%= ENV.fetch("RAILS_MAX_THREADS", 5) %>
