<div class="top_user_create">
    <div class="container">

<% unless @user.nil? %>
  <div style="color: blue;">
    <p><strong>DEBUG: @user.class = <%= @user.class %></strong></p>
    <p><strong>DEBUG: errors = <%= @user.errors.full_messages %></strong></p>
  </div>
<% end %>

        <h1 class="top_user_create_title">新規登録</h1>
        <%= form_with model: @user, local: true, data: { turbo: false } do |f| %>
            <%= render 'shared/error_messages', object: f.object %>
            <div class="top_user_create_form_list">
                <%= f.label :name, "名前(ニックネーム)", class: "form_label" %>
                <%= f.text_field :name, class: "form_control" %>
                <% f.object.errors.full_messages_for(:name).each do |msg| %>
                    <div class="text-danger"><%= msg %></div>
                <% end %>
            </div>
            <div class="top_user_create_form_list">
                <%= f.label :email, "メールアドレス", class: "form_label" %>
                <%= f.email_field :email, class: "form_control" %>
                <% f.object.errors.full_messages_for(:email).each do |msg| %>
                    <div class="text-danger"><%= msg %></div>
                <% end %>
            </div>
            <div class="top_user_create_form_list">
                <%= f.label :password, "パスワード", class: "form_label" %>
                <%= f.password_field :password, class: "form_control" %>
                <% f.object.errors.full_messages_for(:password).each do |msg| %>
                    <div class="text-danger"><%= msg %></div>
                <% end %>
            </div>
            <div class="top_user_create_form_list">
                <%= f.label :password_confirmation, "パスワード(確認用)", class: "form_label" %>
                <%= f.password_field :password_confirmation, class: "form_control" %>
                <% f.object.errors.full_messages_for(:password_confirmation).each do |msg| %>
                    <div class="text-danger"><%= msg %></div>
                <% end %>
            </div>

            <!-- 利用規約とプライバシーポリシー -->
            <div>
                <%= f.check_box :terms_of_service, {}, '1', '0' %>
                <%= f.label :terms_of_service do %>
                    <a href="<%= pages_terms_path %>" target="_blank">利用規約</a>と
                    <a href="<%= pages_privacy_path %>" target="_blank">プライバシーポリシー</a>に同意する
                <% end %>
                <% if @user.errors[:terms_of_service].any? %>
                    <div style="color: red;"><%= @user.errors[:terms_of_service].first %></div>
                <% end %>
            </div>

            <%= f.submit "登録", class: "btn top_user_create_buttun" %>
        <% end %>
    </div>
</div>